(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();class u{_a=null;_b=null;_operator=null;_result=null;isHaveResult(){return Number.isFinite(this._result)}getResult(){return console.log(this._a),console.log(this._b),console.log(this._operator),this._result}pushOperand(t){console.log("pushOperand",t),this._a===null?this._a=t:this._b=t}pushOperandEquals(t){this._a===null?this._a=t:this._b===null&&(this._b=t)}pushAndEquals(t){this.pushOperandEquals(t),this._canCalculate()&&(this._calculate(),this._rememberA(this._result))}pushAndMultiply(t){this.pushOperand(t),this._applyOperator("*")}pushAndDivide(t){this.pushOperand(t),this._applyOperator("/")}pushAndSubtract(t){this.pushOperand(t),this._applyOperator("-")}pushAndAdd(t){this.pushOperand(t),this._applyOperator("+")}getPercent(t){return t/100}clear(){this._a=null,this._b=null,this._operator=null,this._result=null}_applyOperator(t){this._canCalculate()&&(this._calculate(),this._rememberA(this._result)),this._operator=t}_rememberA(t){this._a=t}_canCalculate(){return this._a!==null&&this._b!==null&&this._operator!==null}_calculate(){if(this._a===null)throw new Error("No first operand");if(this._b===null)throw new Error("No second operand");if(this._operator===null)throw new Error("No operator");switch(this._operator){case"+":this._result=this._a+this._b;break;case"-":this._result=this._a-this._b;break;case"*":this._result=this._a*this._b;break;case"/":this._result=this._a/this._b;break}}_reset(){this._a=null,this._b=null,this._operator=null}}class _{#t={};on(t,i){this.#t[t]||(this.#t[t]=[]),this.#t[t].push(i)}off(t,i){this.#t[t]&&(this.#t[t]=this.#t[t].filter(r=>r!==i))}emit(t,i){if(this.#t[t])for(const r of this.#t[t])r(i)}}const h=new _;class c{static formatToCalculator(t){return+this._replaceCommaWithDot(t)}static formatFromCalculator(t){if(t===0)return"0";const i=this._roundToSignificantDigits(t,9),r=Math.abs(i);if(r>=1e9||r<1e-8)return i.toExponential(3).replace("+","");let[e,s]=(""+i).split(".");e=e.replace(/\B(?=(\d{3})+(?!\d))/g," ");let a=e.replace(/ /g,"").length;if(s){const o=Math.max(0,9-a);s=s.slice(0,o)}const n=s?`${e},${s}`:e;return this._replaceDotWithComma(n)}static _replaceCommaWithDot(t){return t.includes(",")?t.replace(",","."):t}static _replaceDotWithComma(t){return t.includes(".")?t.replace(".",","):t}static _roundToSignificantDigits(t,i){if(t===0)return 0;const r=Math.pow(10,i-Math.ceil(Math.log10(Math.abs(t))));return Math.round(t*r)/r}}class p{_input="0";constructor(){this._calculator=new u,this._changeDisplay()}clickZero(){this._clickNumber("0")}clickOne(){this._clickNumber("1")}clickTwo(){this._clickNumber("2")}clickThree(){this._clickNumber("3")}clickFour(){this._clickNumber("4")}clickFive(){this._clickNumber("5")}clickSix(){this._clickNumber("6")}clickSeven(){this._clickNumber("7")}clickEight(){this._clickNumber("8")}clickNine(){this._clickNumber("9")}clickComma(){this._clickNumberWithoutErasingLeadingZero(",")}clickDivide(){this._clickOperation(t=>this._calculator.pushAndDivide(t))}clickMultiply(){this._clickOperation(t=>this._calculator.pushAndMultiply(t))}clickSubtract(){this._clickOperation(t=>this._calculator.pushAndSubtract(t))}clickAdd(){this._clickOperation(t=>this._calculator.pushAndAdd(t))}clickEquals(){this._clickOperation(t=>this._calculator.pushAndEquals(t))}_clickOperation(t){const i=c.formatToCalculator(this._input);t(i),this._tryGetResultAndReset()}clickClear(){this._resetInput(),this._changeDisplay()}clickClearAll(){this._resetInput(),this._changeDisplay(),this._calculator.clear()}clickPercent(){this._input=c.formatFromCalculator(this._calculator.getPercent(c.formatToCalculator(this._input))),this._changeDisplay()}clickSign(){this._input[0]==="-"?this._input=this._input.slice(1):this._input="-"+this._input,this._changeDisplay()}_tryGetResult(){if(this._calculator.isHaveResult()){const t=this._calculator.getResult();this._input=c.formatFromCalculator(t),this._changeDisplay()}}_resetInput(){this._input="0"}_tryGetResultAndReset(){this._tryGetResult(),this._resetInput()}_eraseLeadingZero(){this._input==="0"&&(this._input="")}_clickNumber(t){this._eraseLeadingZero(),this._clickNumberWithoutErasingLeadingZero(t)}_clickNumberWithoutErasingLeadingZero(t){this._input+=t,console.log(this._input),this._changeDisplay()}_changeDisplay(){h.emit("changeDisplay",this._input)}}class d{constructor(t){this.element=document.querySelector(`#${t}`)}isHighlightable(){return this.element.classList.contains("highlightable")}addHandler(t){this.element.addEventListener("click",t)}highlight(){this.element.classList.add("highlight")}unhighlight(){this.element.classList.remove("highlight")}}class f{buttons={};constructor(t){t.forEach(i=>{this.buttons[i]=new d(i)}),Object.values(this.buttons).forEach(i=>{i.addHandler(()=>this._unhighlightAll())}),Object.values(this.buttons).filter(i=>i.isHighlightable()).forEach(i=>{i.addHandler(()=>i.highlight())})}addHandler(t,i){if(!this.buttons[t])throw new Error(`No button with id: ${t}`);this.buttons[t].addHandler(i)}addHandlerAll(t){Object.values(this.buttons).forEach(i=>{i.addHandler(t)})}_unhighlightAll(){Object.values(this.buttons).forEach(t=>{t.unhighlight()})}}h.on("changeDisplay",l=>{document.querySelector("#display-text").innerText=l});const g=["zero","one","two","three","four","five","six","seven","eight","nine","comma","add","subtract","multiply","divide","equals","clear","sign","percent"],m=new f(g),b=new p;Object.entries(m.buttons).forEach(([l,t])=>{t.addHandler(()=>b[`click${k(l)}`]())});function k(l){return l.charAt(0).toUpperCase()+l.slice(1)}
